"use strict";var u2bear=angular.module("u2bear.services",[]);u2bear.factory("Reqs",function(){return{Fs:require("fs"),Ytdl:require("ytdl-core"),Search:require("youtube-search"),Mp3:require("youtube-mp3"),Gui:require("nw.gui"),Http:require("http"),Request:require("request"),Updater:require("./updater/updater"),Pkg:require("./package.json")}}),u2bear.factory("Consts",function(){var e=-1!=process.execPath.indexOf("u2bear.exe")?process.execPath.replace("u2bear.exe",""):"";return{APP_DIRECTORY:e,VIDEOS_DIRECTORY:e+"videos/",SONGS_DIRECTORY:e+"songs/",IMAGES_DIRECTORY:e+"images/",searchOptions:{youtube:1,local:2},playerOptions:{PAUSE_PLAY:1,STOP:2,PLAY:3},arrows:{DOWN:40,UP:38,LEFT:37,RIGHT:39}}}),u2bear.factory("General",["Reqs",function(e){return{extractName:function(e){return e.substring(0,e.lastIndexOf(".mp4"))},downloadFile:function(r,t,a){var u=e.Fs.createWriteStream(t);e.Http.get(r,function(e){e.pipe(u),u.on("finish",function(){u.close(a)})}).on("error",function(){e.Fs.unlink(t)})},validateVideoName:function(e){return e=e.replace(/\\/g,"_"),e=e.replace(/\//g,"_"),e=e.replace(/\?/g,"_"),e=e.replace(/\:/,"_"),e=e.replace(/\*/g,"_"),e=e.replace(/\"/g,"_"),e=e.replace(/\>/g,"_"),e=e.replace(/\</g,"_"),e=e.replace(/\|/g,"_")},getParam:function(e,r){var t=e.match(new RegExp("[?&]"+r+"=([^&]+)"));return t&&2==t.length?t[1]:null}}}]);